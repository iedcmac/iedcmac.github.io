<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <META HTTP-EQUIV="Refresh" CONTENT=1800>
    <title>MAC Weather Station</title>
    <link rel="icon" href="images/logo.png"> <!-- should add favicon  -->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/custom.css">
    <!-- update the version number as needed -->
    <!-- <script defer src="/__/firebase/8.4.2/firebase-app.js"></script> -->
    <!-- include only the Firebase features as you need -->
    <!-- <script defer src="/__/firebase/8.4.2/firebase-database.js"></script> -->
    <!-- initialize the SDK after all desired features are loaded -->
    <!-- <script defer src="/__/firebase/init.js"></script> -->
    <!-- firebase.database().ref('/path/to/ref').on('value', snapshot => { }); -->

    <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-database.js"></script>
    <!-- Awesome icon -->
    <script src="https://kit.fontawesome.com/1f8fcc82f7.js" crossorigin="anonymous"></script>
    <!-- Boostrap File -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


    <link rel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <!------------------------Styling------------------------->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@300&display=swap');
        marquee{
            font-size: 18px;
            background-color: #ffffff;
            font-weight: 700;
            /*opacity: .5;*/
        }
        html,body{
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            -ms-overflow-style:none;
        }
    </style>
</head>



<body style="background: url(images/back.jpg); background-position: center;background-repeat: repeat;background-size: 100%;">
    <!------------------------Page Layout Content------------------------->
    <header>
        <p style="font-family: 'Roboto ',monospace;font-size: 35px">Real Time Weather Station &nbsp;Tutodu Educational Services Pvt Ltd.</p>
    </header>
    <div>
        <marquee>
             In association with IEDC Mar Augusthinose College,Ramapuram
        </marquee>
    </div>
    <div class="container" style="margin-top: 2%;">
        <div class="row gx-5">
            <div class="col-md-4" style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada" style="text-align: center;">Temperature</h2>
                    <img src="images/temp.png" class="im"><br>
                    <p id="temp" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                </div>
            </div>
            <div class="col-md-4" style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">Humidity</h2>
                    <img src="images/hum.png" class="im"><br>
                    <p id="hum" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>

                </div>
            </div>
            <div class="col-md-4" style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">Pressure</h2>
                    <img src="images/pre.png" class="im"><br>
                    <p id="pre" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                </div>
            </div>
            <div class="col-md-4"style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">Wind Speed</h2>
                    <img src="images/wind.png" class="im"><br>
                    <p id="wind" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                    
                </div>
            </div>
            <div class="col-md-4"style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">Altitude</h2>
                    <img src="images/alti.png" class="im"><br>
                    <p id="alti" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                </div>
            </div>
            <div class="col-md-4"style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">UV</h2>
                    <img src="images/uv.png" class="im"><br>
                    <p id="uvindex" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                </div>
            </div>
            <div class="col-md-4"style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">Light</h2>
                    <img src="images/light.png" class="im"><br>
                    <p id="light" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                </div>
            </div>
            <div class="col-md-4"style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">Wind Direction</h2>
                    <img src="images/winddir1.png" class="im"><br>
                    <!-- <p id="deg" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p> -->
                    <p id="dir" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                </div>
            </div>
            <div class="col-md-4"style="height: 150px;">
                <div style="height: 130px;background-color: whitesmoke;border-radius: 15px;" class="sha">
                    <h2 class="animate__animated animate__tada">Cloud</h2>
                    <img src="images/clouds1.png" class="im"><br>
                    <p id="clo" style="font-size: 35px;font-family: Times New Roman sans-serif;"></p>
                </div>
            </div>
        </div> 
    </div>

    <footer>
        <p style="align-content: center;font-weight: 500"><!-- 2022&copy; Mar Augusthinose College Weather Station-->2022&copy; Tutodu Educational Services Pvt Ltd.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Developed By Christo Joseph and Toney Abraham (R&D Team Tutodu)</p>
    </footer>
    <!------------------------Page Layout Content------------------------->

    <!------------------------Scripting------------------------->
    <!-- <script src="js/main.js"></script> -->
    <!------------------------Scripting------------------------->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script>
        fetch("https://api.openweathermap.org/data/2.5/weather?q=manathoor&appid=68b92a51844b7e1772e93b7151422f04")
        .then(function (response) {
            return response.json();
        })
        .then(function (data) {
            appendData(data);
        })
        .catch(function (err) {
            console.log('error: ' + err);
        });
        function convertion(val) {
            return (val - 273.15).toFixed(2);
        }
        function direction(deg){
            let direction;
            if ((deg >0)&&(deg<22.5))
                direction = "N";
            else if ((deg>22.5) &&(deg<67.50))
                direction = "NE";
            else if ((deg>67.50) &&(deg<112.5))
                direction = "E";
            else if ((deg>112.5)&&(deg<157.5))
                direction = "SE";
            else if ((deg>157.5)&&(deg<202.5))
                direction = "S";
            else if ((deg>202.5)&&(deg<247.5))
                direction = "SW";
            else if ((deg>247.5)&&(deg<292.5))
                direction = "W";
            else if ((deg>292.5)&&(deg<337.5))
                direction = "NW";
            else 
                direction = "N";
            document.getElementById("dir").innerHTML = direction;
        }
        function appendData(data) {
            var air = document.getElementById("wind");
            var c = document.getElementById("clo");
            var d = document.getElementById("deg");

            var wndspd = data["wind"]["speed"];
            var div = document.createElement("div");
            div.innerHTML = `${wndspd}&nbsp;m/s`;           // div.innerHTML = data.name;
            air.appendChild(div);

            var clo = data["clouds"]["all"];
            var div = document.createElement("div");
            div.innerHTML = `${clo}&nbsp;%`;
            c.appendChild(div);

            var deg = data["wind"]["deg"];
            var div = document.createElement("div");
            div.innerHTML = `<span>${direction(deg)}</span>`;
            d.appendChild(div);
        }
    </script>
    <!-- Configuration of firebase -->
    <script>
    // Your web app's Firebase configuration
    var firebaseConfig={
     apiKey: "AIzaSyBwbDEgSwynRtNoqVAuDQw6erp_OZUhBS0",
     authDomain: "dynamic-f7f88.firebaseapp.com",
     databaseURL: "https://dynamic-f7f88-default-rtdb.firebaseio.com",
     projectId: "dynamic-f7f88",
     storageBucket: "dynamic-f7f88.appspot.com",
     messagingSenderId: "128684880381",
     appId: "1:128684880381:web:af38f4cca4fdaa58c46994",
     measurementId: "G-RS11P9V072"
 };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    var firebaseRef = firebase.database().ref("devices");
    firebaseRef.once("value",function(snapshot){
      var data = snapshot.val();
      for(let i in data){
        console.log(data[i]);
        // document.write(data[i]);
        // document.getElementById("temp").innerHTML=(data[i]);
      }
      var t = document.getElementById("temp")

      var temp = data["temp"];
      var div = document.createElement("div");
      div.innerHTML = `${temp}&nbsp;&#8451`;
      t.appendChild(div);

      var h = document.getElementById("hum")

      var hum = data["hum"];
      var div = document.createElement("div");
      div.innerHTML = `${hum}&nbsp;g.&#13221;`;
      h.appendChild(div);

      var p = document.getElementById("pre")

      var pre = data["pressure"];
      var div = document.createElement("div");
      div.innerHTML = `${pre}&nbsp;hPa`;
      p.appendChild(div);

      var a = document.getElementById("alti")

      var alti = data["altitude"];
      var div = document.createElement("div");
      div.innerHTML = `${alti}&nbsp;meter`;
      a.appendChild(div);

      var l = document.getElementById("light")

      var light = data["lightindex"];
      var div = document.createElement("div");
      div.innerHTML = `${light}&nbsp;lm/&#13217;`;
      l.appendChild(div);

      var u = document.getElementById("uvindex")

      var uv = data["uvindex"];
      var div = document.createElement("div");
      div.innerHTML = `${uv}&nbsp;mW/&#13216;`;
      u.appendChild(div);
    })
</script>
</body>
</html>